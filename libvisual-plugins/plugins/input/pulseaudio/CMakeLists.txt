INCLUDE_DIRECTORIES(
  ${PROJECT_SOURCE_DIR}
  ${PROJECT_BINARY_DIR}
  ${LIBVISUAL_INCLUDE_DIRS}
  ${PULSE_INCLUDE_DIRS}
)

LINK_DIRECTORIES(
  ${LIBVISUAL_LIBRARY_DIRS}
  ${PULSE_LIBRARY_DIRS}
)

SET(input_pulseaudio_SOURCES
  input_pulseaudio.c
)

ADD_LIBRARY(input_pulseaudio MODULE ${input_pulseaudio_SOURCES})

SET_TARGET_PROPERTIES(input_pulseaudio PROPERTIES
  LINK_FLAGS -Wl,--unresolved-symbols,ignore-in-shared-libs
)

FIND_PACKAGE(Threads)

TARGET_LINK_LIBRARIES(input_pulseaudio
  ${LIBVISUAL_LIBRARIES}
  ${PULSE_LIBRARIES}
  ${CMAKE_THREAD_LIBS_INIT}
)

INSTALL(TARGETS input_pulseaudio LIBRARY DESTINATION ${LV_INPUT_PLUGIN_DIR})
